export PATH=$HOME/.pyenv/bin:$HOME/.bin:$HOME/bin:/usr/local/bin:$PATH
export ZSH=$HOME/.oh-my-zsh

# See https://github.com/robbyrussell/oh-my-zsh/wiki/Themes
ZSH_THEME="fishy"

plugins=(
    debian
    common-aliases
    emacs
    git
    git-extras
    github
    gnu-utils
    heroku
    history-substring-search
    python
    sudo
    tmux
    zsh-autosuggestions
    zsh-completions
    zsh-syntax-highlighting
)
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=3'

source $ZSH/oh-my-zsh.sh

export EDITOR='emacs'

# User configuration
##### NVM
export NVM_DIR="$HOME/.nvm"
function nvm {
    if [ -s "$NVM_DIR/nvm.sh" ]; then
        . "$NVM_DIR/nvm.sh"
        nvm use system
        nvm $@
    fi
}

##### GO
export GOPATH=$HOME/Documents/Go
export PATH=$PATH:$GOROOT/bin:$GOPATH/bin

##### Pyenv and virutalenvwrapper - Python
export PYENV_VIRTUALENVWRAPPER_PREFER_PYVENV="true"
export PIP_REQUIRE_VIRTUALENV=true
export WORKON_HOME=$HOME/.virtualenvs
export PROJECT_HOME=$WORK_FOLDER
export PYTHONBREAKPOINT=ipdb.set_trace

# Lazy load pyenv
if type pyenv > /dev/null; then
    pyenv() {
        unfunction $0
        eval "$(command pyenv init -)"
        eval "$(command pyenv virtualenv-init -)"
        pyenv virtualenvwrapper
        $0 "$@"
    }
fi

workon() {
    unfunction "$0"
    pyenv > /dev/null 2>&1
    $0 "$@"
}

##### GPG Key
export GPG_TTY=$(tty)

##### Alias
alias emacs='emacs -nw'
alias semacs='emacs -nw -Q'
[ -s "$WORK_FOLDER" ] && alias work='emacs -nw "${WORK_FOLDER}"/Documents/Orgs/personal_notes.org'
alias notes='emacs -nw "$HOME"/Documents/Orgs/work_olist_notes.org'
alias todo='emacs -nw "$HOME"/Documents/Orgs/todo.org'
alias python_dev='pip install rope jedi flake8 autopep8 yapf isort elpy'
alias update='sudo apt update && sudo apt dist-upgrade -y && sudo apt autoremove'
alias bat='bat --theme 1337'
alias cat='bat --theme 1337'
alias remove_duplicate_lines='awk '"'"'!visited[$0]++'"'"''
alias b='buku --suggest'

##### Navigation
alias ..='cd ..'
alias ...='cd ../..'
alias .3='cd ../../..'
alias .4='cd ../../../..'
alias .5='cd ../../../../..'
alias ~='cd ~'
# Easy report
alias ls='ls -Fh --color=auto --group-directories-first'

##### Rust
[ -s $HOME/.cargo ] && source $HOME/.cargo/env

##### Path configurations
export WORK_FOLDER=./OlistProjects/
export PROJECT_HOME=$WORK_FOLDER
export WORKON_HOME=$HOME/.virtualenvs

##### Autostart X
if systemctl -q is-active graphical.target && [[ ! $DISPLAY && $XDG_VTNR -eq 1 ]]; then
    exec startx
fi

bindkey -e
